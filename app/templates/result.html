<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON in HTML</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script>
        function displayJson() {
            const data = {{ data | tojson }};
            document.getElementById('jsonData').textContent = JSON.stringify(data, null, 4);

            // Populate input fields based on JSON data
            populateSections('Personal Info', [data['Personal Info']]);
            populateSections('Work Experience', data['Work Experience']);
            populateSections('Projects', data['Projects']);
            populateSections('Education', data['Education']);
            populateSkills(data['Skills']);
        }

        function populateSections(sectionId, sectionData) {
            const section = document.getElementById(sectionId.toLowerCase().replace(" ", "-"));
            sectionData.forEach((item, index) => {
                addSection(sectionId, item, index);
            });
        }

        function addSection(sectionId, item = {}, index = null) {
            const section = document.getElementById(sectionId.toLowerCase().replace(" ", "-"));
            const newIndex = index !== null ? index : section.childElementCount;
            const div = document.createElement('div');
            div.className = 'section-item mb-4 p-4 border rounded-lg';
            let fieldsHtml = `<h3 class="text-xl font-semibold mb-2">${sectionId} ${sectionId === 'Personal Info' ? '' : newIndex + 1}</h3>`;

            for (const key in item) {
                const value = item[key];
                const inputType = typeof value === 'string' && key.toLowerCase().includes('description') ? 'textarea' : 'text';
                fieldsHtml += `
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="${key}-${newIndex}">
                            ${key}
                        </label>
                        ${inputType === 'textarea' ? 
                            `<textarea id="${key}-${newIndex}" name="${sectionId}[${newIndex}][${key}]" rows="4" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">${value}</textarea>` :
                            `<input type="${inputType}" id="${key}-${newIndex}" name="${sectionId}[${newIndex}][${key}]" value="${value}" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />`
                        }
                    </div>
                `;
            }

            if (sectionId !== 'Personal Info') {
                fieldsHtml += `<button type="button" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" onclick="removeSection(this)">Remove</button>`;
            }

            div.innerHTML = fieldsHtml;
            section.appendChild(div);
        }

        function removeSection(button) {
            const sectionItem = button.parentNode;
            sectionItem.parentNode.removeChild(sectionItem);
        }

        function addNewSection(sectionId) {
            addSection(sectionId);
        }
    </script>
</head>
<body onload="displayJson()" class="bg-gray-100 p-6">
   
    <div class="mb-8">
        <h2 class="text-2xl font-bold mb-4">Personal Info</h2>
        <div id="personal-info"></div>
    </div>

    <div class="mb-8">
        <h2 class="text-2xl font-bold mb-4">Work Experience</h2>
        <div id="work-experience"></div>
        <button type="button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" onclick="addNewSection('Work Experience')">Add Work Experience</button>
    </div>

    <div class="mb-8">
        <h2 class="text-2xl font-bold mb-4">Projects</h2>
        <div id="projects"></div>
        <button type="button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" onclick="addNewSection('Projects')">Add Project</button>
    </div>



    <div class="mb-8">
        <h2 class="text-2xl font-bold mb-4">Education</h2>
        <div id="education"></div>
        <button type="button" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" onclick="addNewSection('Education')">Add Education</button>
    </div>

    <h1 class="text-3xl font-bold mb-4">Display JSON Data in HTML</h1>
    <pre id="jsonData" class="mb-6 bg-white p-4 border rounded-lg"></pre>

</body>
</html>
